<!DOCTYPE html>
<html lang="en-US">

<head>
    <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
<meta name="apple-mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-status-bar-style" content="black">
<meta name="mobile-web-app-capable" content="yes">
<meta property="og:image" content="https://hackmd.io/favicon.png">
<meta property="fb:app_id" content="1436904003272070">

<meta name="realtime-register-serverurl" content="https://hackmd.io/realtime-reg">

<meta name="csrf-token" content="1IyaCt8F-tsDZbXeGzXLikkGsCkb4TCUVFvU">
<title>Constraint Programming</title>
<link rel="icon" type="image/png" href="https://hackmd.io/favicon.png">
<link rel="apple-touch-icon" href="https://hackmd.io/apple-touch-icon.png">

<script nonce="23a5ded9-ebef-40ba-a57a-9088fedb1593">
window.domain = 'hackmd.io'
window.urlpath = ''
window.debug = false
window.version = '1.3.0'
window.brand = 'HackMD'



window.GOOGLE_API_KEY = 'AIzaSyCjSrqWHhmWJnoI7JlD88XDSaBgiKbaenA'
window.GOOGLE_CLIENT_ID = '911617723593-drikdibvvn63slfd6kbqigo8ql1no55s.apps.googleusercontent.com'
window.DROPBOX_APP_KEY = 'rdoizrlnkuha23r'

window.PLANTUML_SERVER = 'https://ptuml.hackmd.io'

window.ASSET_URL = 'https://assets.hackmd.io'

window.USER_CAN_CREATE_TEAM = true
window.USER_CAN_DELETE_ACCOUNT = true
window.USER_DELETE_ACCOUNT_VIA_EMAIL = true
window.PAYMENT_ENABLED = true
window.GITHUB_SYNC_ENABLED = true
window.FREE_TEAM_NUM = 3
window.FREE_TEAM_MEMBER_NUM = 3
window.FREE_PUBLIC_TEAM_NUM = 10

window.EE_SITE_ENABLE = false
window.EE_SITE_NAME = 'false'
window.EE_SITE_LINK = 'false'

window.ALLOW_ANONYMOUS = true
window.PUBLIC_OVERVIEW = false
window.INTERNAL_PUBLIC_OVERVIEW = false

window.SHOW_OVERVIEW = true

window.USE_CDN = false

window.canEdit = false




</script>



<!-- Google Tag Manager -->
<script nonce="23a5ded9-ebef-40ba-a57a-9088fedb1593">(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
})(window,document,'script','dataLayer','GTM-KLW9Z3');</script>
<!-- End Google Tag Manager -->



<link rel="stylesheet" href='https://assets.hackmd.io/build/emojify.js/dist/css/basic/emojify.min.css'>
 <link href="https://assets.hackmd.io/build/font-vendor.b86e2bf451b246b1a88e.css" rel="stylesheet"><link href="https://assets.hackmd.io/build/common-vendor.b8ecfc406ac0b5f77a26.css" rel="stylesheet"><link href="https://assets.hackmd.io/build/index-vendor.8a602875f0438be6661b.css" rel="stylesheet"><link href="https://assets.hackmd.io/build/index.b7f272918f6892867a56.css" rel="stylesheet">

<!-- HTML5 shim and Respond.js for IE8 support of HTML5 elements and media queries -->
<!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
<!--[if lt IE 9]>
	<script src="https://cdnjs.cloudflare.com/ajax/libs/html5shiv/3.7.3/html5shiv.min.js" integrity="sha256-3Jy/GbSLrg0o9y5Z5n1uw0qxZECH7C6OQpVBgNFYa0g=" crossorigin="anonymous"></script>
	<script src="https://cdnjs.cloudflare.com/ajax/libs/respond.js/1.4.2/respond.min.js" integrity="sha256-g6iAfvZp+nDQ2TdTR/VVKJf3bGro4ub5fvWSWVRi2NE=" crossorigin="anonymous"></script>
	<script src="https://cdnjs.cloudflare.com/ajax/libs/es5-shim/4.5.9/es5-shim.min.js" integrity="sha256-8E4Is26QH0bD52WoQpcB+R/tcWQtpzlCojrybUd7Mxo=" crossorigin="anonymous"></script>
<![endif]-->


</head>

<body>
    
<div class="ui-spinner unselectable hidden-print"></div>

    <div class="row ui-content" style="display: none;">
    <div class="ui-edit-area unselectable">
        <textarea id="textit"></textarea>
    </div>
    <div class="ui-view-area">
        
        <div id="doc" class="markdown-body container-fluid" data-hard-breaks="true"># Constraint Programming

The goal of constraint programming is to provide a declarative and procedural formulation for a discrete optimization problem. The declarative formulation states the constraints and objective function and also provides a way to describe the sort of solution one is seeking for, without distraction of algorithmic details.
The search is directed by the procedural formulation, which specifies how to search for a solution.

### Basic idea

A constraint can be viewed as a procedure which operates on the solution space. Each constraint provides a relaxation to the constraint store which limits the portion of search base. The constraint store should contain constraints for which generating feasible solutions is easy.

Steps to do to solve a constraint programming problem:
* choose the decision variables
* identify the constraints and express them in terms of decision variables.


### 8 queens problem:

Consider the problem where you have to place 8 queens on a chessboard so that no two fo them attack each pther.Two queens attack each other if they are on same column or diagonal.

![](/static/8queen.png)

GOAL OF CONSTRAINT PROGRAMMING: Remove all values which are impossible.

So,you start by placing queens one by one and when you reach a point where you cannot move any further you come back and reconsider the position.This is equivalent of making a choice when no more deduction can be made. So when the choice is wrong solver backtracks. 
 Here the decision variable : associate a decision variable with each column.Then a variable denotes the row of a queen placed in this coloumn.Validity : no two queens can be placed in the same row so this is valid.
Constraints : queens cannot be placed on the same 
* row
* upward diagonal
* downward diagonal


### Map colouring : 

Problem : Colour a map such that no two adjascent territories recieve the same colour.
![](https://i.imgur.com/XS4ir0E.png)



So in the above problem ,
    decision variable : color given to a country
    domain of decision variable : set of values the variable can take.here 4 different colors ( As the 4 color theorem says every map can be coloured using 4 colors)
    constraints : two adjascent countries cannot have the same color.
    
### conversion of character case and ascii codes.

Instead of following a set of instructions with only one way to compute values constraint programming declares the relationship between variables and constraints.

To see the difference of constraint programming approach we will see the example of converter which changes character cases(lower-case to/from capital/upper-case) and return the ASCII codes for each. So at any point of time the converter is aware of all 4 values.

The problem is translated into a constraint system consisting of connectors(variables) and nodes (constraints).connectors check for variable domain.When one value changes a particular connector changes/notifies all its connected nodes about the change.Nodes satisfy constraints calculate new values and propagate the them to other connectors.


![](https://i.imgur.com/vWU99Ra.png)


All the connectors are linked to nodes (defined by constraints),when one value is set in any one of the four connectors the system automatically calculates and sets the values on the rest of the connectors.This is the main advantage of using constraint programming ,as recaculation is reduced and values are automatically set.


#### Constraint programming is a combination of Branch and Prune.
Pruning is reducing the search space as much as possible. Constraints are used to remove the values from the variable domain that can not belong to any solution. 

Branching is decomposing the problem in subproblems and discovering the subproblems. All the possible values are tried until a solution is found or it can be proven that there is no solution.
 
The structure of the constraint can be explored to prune the search base as best as it can. This is the strength of constraint programming.


### Computational paradigm

- Feasiblity check:
    Can a constraint be satisfied given the values in the domains of its variables. 
- Pruning:
    If the constraint is satisfiable, determining which values in the domains can not be part of any solution.
- The Propogation engine:
    This a simple (fixpoint) algorithm which is the core of any constraint-programming solver. The basic idea behind the algorithm is, selecting a constraint and checking its feasiblity. If it is not feasible, the algorithm returns failure, else pruning algorithm related to the constraint is applied until no constraint can remove any value from the domain of its variables. Each constraint has a dedicated algorithm.
    
### Linear constraints over integers

##### Consider a constraint
$$ a_1x_1 + . . . + a_n x_n \ge b_1y_1 + . . . + b_my_m$$

$$ a_i, b_j \ge 0 \ are \ constants 
\\ x_i, y_j \ are \ variables \ with \ domains \ D(x_i), D(y_j) $$

##### Feasiblity test
Checking the feasiblity of the constraint, the constraint is satisfied if for the largest possible value of left hand side and smallest possible value of right hand side, the constraint is satisfied.

$$ a_1 max(D(x_1)) + . . . + a_n max(D(x_n)) \ge b_1 min(D(y_1)) + . . . . . + b_m min(D(y_m)) $$

$$ l = a_1 max(D(x_1)) + . . . + a_n max(D(x_n)) 
\\ r = b_1 min(D(y_1)) + . . . . . + b_m min(D(y_m)) $$

where *l* denotes the largest value of the left hand side *r* denotes the smallest value of right hand side for the given constraint.

##### Pruning
$$ a_i x_i \ge r - (l - a_i max(D(x_i))) $$

thus, 

$$ x_i \ge \lceil {r - (l - a_i max(D(x_i))) \over a_i} \rceil $$

and

$$ y_j \le \lfloor {l 
(r - b_j  min(D(y_j))) \over b_j} \rfloor $$

### Cryptarithmatic puzzles

Another classic example of Constraint programming is Cryptarithmatic puzzles.

A cryptarithmetic puzzle is a mathematical exercise where the digits of some numbers are represented by letters (or symbols). Each letter represents a unique digit. The goal is to find the digits such that a given mathematical equation is verified.
Let us consider 

CP + IS + FUN = TRUE

Let us see the stepwise method:
1. Modelling the problem -
The constraints are:
- The equation: CP + IS + FUN = TRUE
- Each of ten letters must be distinct digits
- C,I,F and T are non-zero (as we do not write leading zeroes in numbers)
2. For Feasiblity checking and Pruning:

This step can be performed by coding up the propogation engine. The important parts of the code are 
1\) The function which ensures that all the letters have different values.
2\) The function which creates constraints that enforce add and carry operations.

### Rich language of constraint programming:

Example of Magic series -
A series $$ (S_0,...,S_n) $$ is magic if $S_i$ represents number of occurences of i in S

for example
$$ 2,1,2,0,0 $$ is a magic series which can be seen from the following table - 



|          | 0 | 1 | 2 | 3 | 4 |
|----------|---|---|---|---|---|
|Occurences| 2 | 1 | 2 | 0 | 0 |

We use the concept of Reification for obtaining a magic series.

Reification:
- The ability to transform a constraint into 0 or 1 variable 
- Where the variable has value 1 if constraint is true and 0 if the constraint is false. 

Thus for finding the magic series, say for n=5
the stepwise execution can be given by
1. Calculating the frequency of occurence of k in the series and storing in an array at kth index
    For this, we will loop through the series and increment a count if we get series[i] = k.
    
Reification comes in play in this step.

Consider that every decision variable has been already given a value, and now we are checking if condition hold for that value, that is does the number actually have that much occurences. If the condition is satisfied, we assign it a value 1 else 0.

Looking at this in terms of coding, we develope ternary constraints with boolean variables.
Constraint booleq(b,x,v) holds if b is equal one and then x is to be equal to v, or if b equals zero, then x is to be different from v.

In terms of Boolean algebra:

$$booleq(b,x,v) \iff (b = 1\ \land x =v)\ \lor (b=0\ \land x \ne v) $$

So initially we considered reified constraints, and replaced them by these ternary constraints and their new booleq values.
Thus we have a system which reasons about natural, simple constraints between booleq variables and other variables. 

#### Stable Marriage Problem
This is a scientific problem.
we have a bunch of men and a bunch of woman,and we have to marry them together. The inputs that we get, is that every woman is going to provide a ranking for the man.
And similarly every man is going to do the same for every woman.

The stability rules for a marriage are -
A and B are married, but according to the rankings they provide, say A has given a higher rank for C than B and similarly B has given a higher rank for D than A. Thus A and B want to switch over such that A is with C and B is with D.

But the switch is not possible because C is married with say E who has a higher rank than A with respect to C and D is married with say F who has a higher rank than B with respect to D.

As the switch is not possible, the marriage is stable.

In terms of coding, the basic conditions that we follow are 
For every man, the husband of the wife of that man is to be the man itself.And the wife of the husband of a woman has to be the woman herself.

The array of variables is indexing another array of variables, we are using this very expressive feature of constraint programming.

Looking at the logical constraints:
If a man prefers a woman w over his wife, then we must have that w prefers her husband over m.

Similarly, if w prefers m over her husband, then m must prefer his wife over m.

The two interesting features of this problem-
- Element constraint
The ability to index an array/matrix with a variable or an expression containing variable
- Logical combination of constraints
can be handled by reification for instance

More about the features
1. Element constraint
variables x and y
c is an array of integers
constraint x = c[y]

These constraints can be used for pruning the search base.

### Global constraints


Global constraints capture the combinatorial substructures arising in many applications.They make modelling easier. In terms of problem solving, global constraints exploit dedicated algorithms and convey the problem structure to the solver so that they don&#39;t need to rediscover it.

A simple example of the global constraint is the$$ alldifferent (x_1,x_2,..x_n)$$ constraint which implies all the values x1,x2..xn are different.

let us see the application of this global constraint using an example,

**8 queens problem using alldifferent constraint** :

initially we saw that the conditions for the 8 queens problem is $$row[i] \ne row[j]$$$$row[i]+i \ne row[j]+j$$$$row[i]-i \ne row[j]-j$$ $$\forall \ i,j \in [1..8] $$


we can also express it as $$alldifferent(row) $$$$alldifferent(all(i\ in\ R)\ row[i]+i)$$$$alldifferent(all(i\ in\ R)\ row[i]i-i)$$ where R = [1..8]
There isn&#39;t a big difference when we look at both for the first time, but the statement alldifferent(all(i int R) row[i]+i) means take all the row[i]+i and check if all of these are different.

**checking the feasibility of the all different constraint :**

the constraint is $$C(x_1,x_2..x_n):where\ x_1\ has\ domain\ D(x_1),\ x_2\ has\ domain\ D(x_2),..,\ x_n\ has\ Domain\ D(x_n)  $$

$$\ni\ v_1\in D_1,\ v_2\in D_2,..\ v_n\in D_n:
C(x_1=v_1,x_2=v_2..x_n=v_n)=true
$$

Having checked the feasibility of the constraint, now we will see how global constraints help pruning the search space better.

Consider, $$ D1\ = \{1,2\}$$$$ D2\ = \{1,2\}$$$$ D3\ = \{1,2\}$$

We can say that logically this is not feasible as there are 3 variables and only 2 values(pigeon hole principle).

when we check individually $$x1\ne x2,x2\ne x3,x3\ne x1 $$ as $$(x_1=1,x_2=2)\ satisfies\ x_1\ne x_2 $$$$(x_2=1,x_3=2)\ satisfies\ x_2\ne x_3 $$$$(x_3=1,x_1=2)\ satisfies\ x_3\ne x_1 $$ seperately these constraints are satisfied but if we put global constraint alldifferent(x1,x2,x3) these don&#39;t satisfy.Hence the global constraint helps us prune the search space more effectively.
Global constraint interacts with all the domains at the same time so helps in pruning the search space better.

SUDOKU :
$$ $$
![](https://i.imgur.com/2mlG3mm.png)
$$ $$
We are going to solve sudoku using constraint programming!.So,what are the variables here? every square has a decision variable and its value will be the number associated with the square.

**What are the constraints here?**

each value of the square should be different from the values in the same row,same column and the values in the respective square.

expressing this in terms of all different constraints,
$$ forall(i\ in\ R):\ \ \ alldifferent(all(j\ in\ R)\ S[i,j])\ \ \ \leftarrow for\ rows$$$$\ forall(i\ in\ R):\ \ \ alldifferent(all(j\ in\ R)\ S[i,j])\ \ \ \leftarrow for\ column$$$$forall(i\ in\ 0..2,j\ in\ 0..2):\ \ \ alldifferent(all(r\ in\ i*3+1,..i*3+3,c\ in\ j*3+1,..j*3+3)\ S[i,j])\ \ \ \leftarrow for\ squares$$
</div>
The system starts propagating using these values,if there are 2 values possible then system makes a choice.
<form action="" method="POST">
Enter 0 for empty box and separate numbers with a space.

<br>
<input type="text" name="sinp1" id="sinp1" placeholder="Row 1" value="9 0 5 0 0 0 0 0 8"><br>
<input type="text" name="sinp2" id="sinp2" placeholder="Row 2" value="4 0 0 5 7 0 1 0 6"><br>
<input type="text" name="sinp3" id="sinp3" placeholder="Row 3" value="0 2 7 6 0 0 0 4 0"><br>
<input type="text" name="sinp4" id="sinp4" placeholder="Row 4" value="0 9 6 0 0 3 5 1 2"><br>
<input type="text" name="sinp5" id="sinp5" placeholder="Row 5" value="7 0 4 0 1 0 3 0 0"><br>
<input type="text" name="sinp6" id="sinp6" placeholder="Row 6" value="2 1 0 9 8 0 0 0 4"><br>
<input type="text" name="sinp7" id="sinp7" placeholder="Row 7" value="0 8 1 0 0 4 0 9 0"><br>
<input type="text" name="sinp8" id="sinp8" placeholder="Row 8" value="3 0 0 8 0 0 0 5 1"><br>
<input type="text" name="sinp9" id="sinp9" placeholder="Row 9" value="0 0 2 0 0 7 0 6 0"><br>
<input type="button" value="Submit" onclick="return loadXMLDoc()">
</form>
<div class="markdown-body">

The following is the sample code for a sudoku problem:
```python=
def dataNormalize (data):
    &#34;&#34;&#34;
    args: data; output from sudoku_solve()
    returns: Normalized output of input - Diplayed at console
    &#34;&#34;&#34;
    ans=&#34;&#34;
    sudoku_nums = [ eachPos[1] for eachPos in sorted( data[0].items() ) ]
    for step in range(0,81,9):
        print(sudoku_nums[step:step+9])
        ans = ans+str(sudoku_nums[step:step+9])+&#34;&lt;br&gt;&#34;
    #for step in range(0,81,9):
    return ans

# Solves the sudoku puzzle
def sudoku_solve ():
    &#34;&#34;&#34;
    args: None
    returns: Sudoku solution
    return type: list
    description:
        * Creates problem instance, sudoku = Problem()
        * Adds sudoku input and their indices as variables
        * Adds constraints to the problem
            1. No two numbers in a row should be same
            2. No two numbers in a column should be same
            3. No two numbers in a 3x3 box shoud be same
        * returns the solution as a list
    &#34;&#34;&#34;
    puzzleNums = &#34;9 0 5 0 0 0 0 0 8\n4 0 0 5 7 0 1 0 6\n0 2 7 6 0 0 0 4 0\n0 9 6 0 0 3 5 1 2\n7 0 4 0 1 0 3 0 0\n2 1 0 9 8 0 0 0 4\n0 8 1 0 0 4 0 9 0\n3 0 0 8 0 0 0 5 1\n0 0 2 0 0 7 0 6 0&#34;
    print(puzzleNums)
    # stores the numbers in a list. Ex: [1,2,9,0,3...]
    puzzleNums = [ int(eachNum) for eachNum in puzzleNums.split() ]
    # Problem instance created.
    # Recursive backtracking is used here
    sudoku = Problem( RecursiveBacktrackingSolver() )
    # List of 9x9 sudoku puzzle indices. Ex: [(0,0), (0,1).. (9,9)]
    sudokuIndex = [ (row, col) for row in range(9) for col in range(9) ]
    # adding variables to the sudoku instance
    for eachIndex,eachNum in zip(sudokuIndex, puzzleNums):
        # If empty location is found, its range is set to 1-10
        if eachNum == 0:
            sudoku.addVariable(eachIndex, range(1,10) )
        # If not an empty location, its a value is assigned
        else:
            sudoku.addVariable(eachIndex, [eachNum] )

    # constraints for each row and column
    # counting from 0-9 (numeber of rows/ columns)
    var = 0
    for aCount in range(9):
        # A list of locations present in a row.
        rowIndices = [ (var, col) for col in range(9) ]
        # Adding constraint
        # No two numbers in a row should be same
        sudoku.addConstraint( AllDifferentConstraint(), rowIndices )
        # A list of locations present in a column
        colIndices = [ (row, var) for row in range(9) ]
        # Adding constraint
        # No two numbers in a column should be same
        sudoku.addConstraint( AllDifferentConstraint(), colIndices )
        var+=1

    # constraints for each block (3x3) of board
    # Finding all boxes in sudoku board. Its 9 in this case
    rowStep = 0
    colStep = 0
    while rowStep &lt; 9:
        colStep = 0
        while colStep &lt; 9:
            # list of locations present in a box
            boxIndices = [ (row, col) for row in range(rowStep, rowStep+3) \
                            for col in range(colStep, colStep+3)]
            # Adding constraint
            # No two numbers in the box should be same
            sudoku.addConstraint( AllDifferentConstraint(), boxIndices )
            colStep+=3
        rowStep+=3
    # return the solution
    return sudoku.getSolutions()

```

**SYMMETRY:**

Exploring symmetric parts of the search space is just repeating the same procedure twice.There are two kinds of symmetries:
* variable symmetry
* value symmetry

**Variable Symmetry:**

We will see this using an example. It is called the BIBD problem i.e balanced incomplete block designs.

**problem:**

input : v,b,r,k,l

output : A v by b 0/1 matrix with exactly r ones per row,k ones per column and a scalar product of value l.

eg:for input(3,3,2,2,1):

| 1     | 1     | 0     |
| ----- | ----- | ----- |
| **0** | **1** | **1** |
| **1** | **0** | **1** |

**Can you see any symmetries here?**

We will look for symmetries using a bigger example.lets say we take (7,7,3,3,1):

![](https://i.imgur.com/hkNYYdT.png)

Swap any row or column ,you can see the consitions still hold.

**how to break variable symmetry?**

ans: impose lexicographic order.

eg:![](https://i.imgur.com/oSozk8U.png)![](https://i.imgur.com/XmmmBYS.png)

left is lexicographically greater than the right one.

**value symmetry:**

Take the example of scene allocation.The days in scene allocation are interchangeable i.e swapping day1 and day2 is also a solution.If S is a solution then P(S) is also a solution where the days of S have been permuted by permutatuion p.

**how can we eliminate these symmetries?**

You have to look at the days aldready allocated and add one more extra day.
$$D(S_k)\ =\ \{ 1,2,..max(S_1,S_2..S_{k-1})+1\}$$
**REDUNDANT CONSTRAINTS**

They don&#39;t exclude any solution but they reduce the search space.

We will see about redundant constraints using the magic series:

A series $$ (S_0,...,S_n) $$ is magic if $S_i$ represents number of occurences of i in S

for example
$$ 2,1,2,0,0 $$ is a magic series which can be seen from the following table - 



|          | 0 | 1 | 2 | 3 | 4 |
|----------|---|---|---|---|---|
|Occurences| 2 | 1 | 2 | 0 | 0 |

while constructing the solution can the entry under four have the value 17?
|          | 0 | 1 | 2 | 3 | 4 |
|----------|---|---|---|---|---|
|Occurences| ? | ? | ? | ? | 17 |

The series itself is of length 5 so you can&#39;t put 17 occurences of 4.Hence, the number of occurences is bounded.

so introducing the redundant constraint,
$$sum(i\ in\ D)\ series[i]\ =\ n
$$

This constraint helps in pruning search space better.We can deduce another constraint due to the definition of magic series:
$$sum(i\ in\ D)\ i*series[i]\ =\ n
$$

*  first role of redundant constraints:
    1. express the properties of the solution
    2. boost the propagation of other constraints
* second role of redundant constraints:
    1. provide more global view
    2. combine existing constraints
    3. improve communication between domains

_______________________________________________________________________________________

**Car Sequencing problem**

To illustrate redundant constraints, visualise a car sequencing problem, where cars go into an assembly line for options to be applied to them. Each production unit of the option has a capacity constraint, for example, at most 2 out of 5 successive cars can require a moonroof.
Problem:
So, we have a list of options, i.e., option 1, option 2, etc. and a class of car requirements that shows which options are needed and not needed for each class. There is a demand constraint of how many cars of each class should be included in the assembly line and a capacity constraint for each option.
![](https://i.imgur.com/ONCsA2P.png)


To solve it:
We start by defining the demand constraint, that the sum of slots in the assembly line ends up producing the required demand of each class type. Then define the setup variables of option required in slot. Then define the capacity constraint for each option.
An important point is to merge the capacity and demand constraint which will reduce the search base:
Consider an option o where at most 2 out of 3 consecutive cars can have this option and 12 cars need this option. This implies that only 2 out of the last set of 3 slots can have this options, therefore out of the remaining slots at least 10 cars have to be included. Repeating this constraint, out of the second last set of 3 slots at most 2 cars can be included, therefore out of the remaining preceding slots at least 8 cars have to be included. This propagation greatly reduces the search base and gives us a solution.

INTERESTING FEATURE:
We used refine, element and sum constraints.

**Dual Modeling**

If there is no one way of modeling a problem, we can put 2 models into the system and link them using constraints.

For example, the 8-queens problem.

Problem:
The first model was to associate a decision variable with each column. The other model was to associate a decision variable with each row.
To solve it:
After defining the row and column constraint, the important thing is to define the constraint that links both the models: For a row and a column,  if the row of column c is r then the column of r has to be equal to c and vice versa. This not only gives a link between the models, we can propagate from one model to the other which gives us a deduction on both.

### Implementing global constraints

We are going to show  binary knapsack and  alldifferent constraint examples. The idea is to combine feasibility and pruning. 
*Golden standard of pruning* : *If value v is in the domain of variable x then there exists a solution to the constraint with value v assigned to variable x*

**Binary knapsack**
General problem:

$$l \le \sum_{k=R} w_kx_k \le u $$$$\forall \ x_k \in \{0,1\} $$

Example:
$$10 \le 2x_1 + 3x_2 + 4x_3 + 5x_4 \le 12 $$

To solve it:
1. Forward phase: Compute feasibility, keep dependency links.
2. Backward phase: Remove values that don&#39;t satisfy constraint, i.e, pruning; or update dependency links.

For this example we create paths based on whether we take or don&#39;t take each variable and see where it leads, i.e, what sum it results in. This is the forward phase. In the backward phase we remove all paths that lead to a sum that is not 10, 11 or 12. This gives us a result $$x_4 = 1$$

Therefore we prune the value 0 from the domain of x4.

**Alldifferent constraints**
Consider a problem: $$x_1 \in \{1,2\}, x_2 \in \{2,3\}, x_3 \in \{1,3\}, x_4 \in \{2,4\}, x_5 \in \{3,4,5,6\}, x_6 \in \{6,7\} $$
$$ alldifferent (x_1,x_2,..x_6)$$
question: can x4 take value 2?

To solve it:
Step 1 is to check if the constraint is feasible. 
So we create a bipartite graph where one type of vertex is the variable and the other type is the values. An edge exists if the value is in the domain of the variable. A matching for a graph G=(V,E) is a set of edges E such that no 2 edges in E share a vertex. A maximum matching M is a matching with the largest number of edges. 
Therefore, the feasibility constraint is defined as *a maximum matching M where the number of edges is equal to the number of variables.*

*How to find a maximum matching?*
1. Start with any matching
2. Improve the matching.

To find an improvement, start from a free vertex x, if there is an edge (x,v) where v is not matched then insert (x,v) in the matching. Otherwise, take a vertex v matched to y. Remove (y,v) and add (x,v) from the matching and restart with y instead of x.

Essentially what we used is an alternating path. An alternating path P for a matching M is a path from vertex x in X to a vertex v in V(both of which are free) such that the edges in the path are alternatively in E\M and M.

*How to find alternative paths?*

* Create a directed graph
* Given a matching: edges in the matching are oriented from bottom to top and edges not in the matching are oriented from the top to the bottom.
* We can use depth first or best first search.
* O(|X|+|E|) where X is set of vertices and E is set of edges.

What we did is start at a free edge and go up and down until we reach a free value to assign values to all the edges.

This was feasibility. Now we need to prune.

*How to prune?*

v must be removed from the domain of x if the edge (x,v) appears in no max matching. This can be done easily for this problem using this property:
*An edge belongs to some but not all max matchings iff given a max matching it belongs to either an even alternating path starting at a free vertex or an even alternating cycle.*
This property tells us whether the edge belongs to at least one max matching. 

Now,
* Given a matching M, create a directed graph like before but reserve the direction of the edges.
* Search for even alternating path starting from free vertex: P
* Search for all strongly connected components and collect all the edges belonging to them: C.
* Remove all the edges not belonging to M,P or C.
* *Complexity*:*O((|X|+|V|)***|E|)*


**Using these two examples (alldifferent and binary knapsack) we&#39;ve seen that for each global constraint we can exploit the structure using a specific algorithm.**



---------------------------------------------------------------------------------------
There are two critical aspects in a constraint programming system. One of them has already been discussed - constraint propagation. The other one is &#39;search&#39;. 
Search is based on feasibility information. Constraint programming system prunes the search base based on constraints and feasibility. Search basically explores this information. 
### First-Fail Principle
This principle tells you to &#34;try first where you are most likely to fail&#34;. That is, if you have a bunch of tasks that you need to finish and you know that one of them is really difficult, you focus on that difficult task first instead of postponing it because you don&#39;t want to spend time doing the easy stuff first. By starting with the hard stuff first we try to make sure that we have a small search tree.
`
Example: For a graph colouring problem, we&#39;ll try to assign colour first to a node that has maximum neighbours and then we move to the remaining nodes.
`
##### Euler knight problem
Visit all positions of the chessboard exactly once using a knight.
Using the first fail principle,
- First, we have to decide where we are most likely to fail. If we start from the corner of the chessboard, we can see that there are only 2 positions where the knight can go so the corners are tough and hence we start at the corners.

So the first-fail principle is finding the variables that are the toughest to assign, i.e. they have the smallest domains.

#### Search Procedure components
Three major components in search procedures are:
- iterate over the variable
- non-deterministically choose a value for the variable
- add a constraint inside a constraint store

#### Various kinds of search in constraint programming
- variable/value labelling
- value/variable labelling
- domain splitting
- focusing on the objective
- symmetry breaking during search
- randomization and restarts

#### Variable/value Labeling
There are two steps:
- choose the variable you want to assign -- reiterate for the variable 
- choose the value to assign -- non deterministic step

Now, we want to apply first-fail principle. So we find the variable that is the toughest to assign. The domain of the variable will be a good indication of what is tough and what is not. If a variable has a smaller domain, it means the variable is probably interacting with a lot of other constraints and hence assigning a value to that variable is difficult. Thus, we choose the variable with the smallest domain. For multiple variables with same domain, we choose the most constrained variable. 

The ordering of the variable is dynamic. This is so because, if after reducing the search space, the domain of some other variable(which was originally not the second choice) has the smallest domain we need to choose that variable next.

We can use the Lexicographic criteria in case of the 8-queen problem, where we first check the domain size and if we have ties then priority is given to the queen which is the closest to the middle of the chess board. This is because placing a queen in the middle reduces more values than the case when a queen is placed in corners. Looking in terms of coding perspective, we are considering two criterial here, first the domain size and second, the closeness to the centre of the board.

Since we are using dual modelling in 8-queen problem, where we had variable associated with column and variable associated with row, this is a good example to show how we can both choose a variable ordering in a dynamic fashion, and a value ordering in a dynamic fashion.

we look at the raw variables as the one that we want to assign and we choose the one which has the smallest domain and then we have to assign a value. We choose a dynamic holder for the 
variables. Then we choose a dynamic holder for the values. In both cases, you&#39;re actually applying the first-fail principal. Thus in constraint programming we can choose a dynamic ordering for the variable and choose a dynamic ordering for the values.

Thus for variable/value labelling, for variable ordering we choose the most constrained variable, that is the variable which is having the smallest domain and which fails most often.
And for value ordering we choose the value which leaves as many options as possible to variables.
This helps in finding a possible solution.


#### Value/variable Labeling
Two steps again:
- choose the value you want to assign
- choose the variable to which you want to assign the above chosen value
This technique is useful in cases when we know that a particular value must be assigned to some variable, like in scheduling problemsand resource allocation problems. For example, in time tabling problem we know that a particular professor *has* to be assigned to particular class.

##### The perfect square problem
The problem: There are several squares of different sizes given to us. We need to rearrange them and pack them to form a single large square.
![](https://i.imgur.com/ZlLYJcY.png)

First we need to find the decision variables. Let&#39;s take that to be the x and y coordinates of the bottom-left corner of every given square (You can also choose the top right corner). 
Then we identify the constraints. Here, we have:
- all smaller squares must fit in the larger square
- the smaller squares shouldn&#39;t overlap

One redundant constraint which is also considered is that, considering a vertical line drawn on the larger square made by joining all the squares, the sum of sides of the squares which the line is intersecting is equal to the size of the larger square.
Now we have everything to write a simple pseudocode for this problem :).
Let us see why we should use value/variable labeling for this problem. We know that there is no empty space in the larger square. Visually, if we are trying to fill up the larger square using smaller squares, whenever we see an empty space we know that it needs to be filled by a square. This is the basic idea behind the following value/variable labeling procedure.

The process which we can follow is -
- Choose a x coordinate p
- For all the squares, check whether a square can be placed at the coordinate p, that is whether the value of bottom left x coordinate for the square is equal to p.
- Repeat this process for all x and y coordinates.

Thus we are taking a value and then checking the square which fits for the value. 

#### Domain splitting

Considering example of magic square problem
Numbers are placed in each block such that all numbers are different and the numbers in a each row, column and diagonal sum up to the same number.

Approach we can follow - 
Select a square and decide what value it can take, but this is a completely random guess. And assigning value in such a way is a strong commitment.

Instead of this, we can select a variable and split its domain into two or more sets which is a much weaker commitment as compared to the previous approach. For example we can say that the value lies in the upper domain or the lower domain of its actual domain.

This strategy is extremly useful for solving car sequencing problems. The car sequencing problem consists of cars placed on the assembly line where cars require a specific option (leather seats, moonroof) and some capacity constraints on the production units are given (only 2 out of 5 consecutive cars require moonroof). We need to find a sequence of the cars such that the capacity constraints are satisfied.

Domain splitting in car sequencing -
- We focus on the difficult options and decide which slots take these options.
- We do not assign the configurations to the slots, we are just deciding whether the slot can take the option.

So we are splitting the slots in two sets, one which are requiring the options one which are not requiring the option.


#### Focusing on the objective function
 Comparing Feasiblity and Optimality:

Till now, our focus was feasiblity branching, that is pruning the search base which essentially provides a lot of information about the problem we are trying to solve. We may also focus on the objective function, that is instead of just looking at the feasible information we can provide reasoning about the objective function itself. 

#### ESDD Deployment Problem
Electronic software distribution deployment problem
Serializable data services problem:
The problem is about implementing protocol which can give reliable software. 
Where we want to map set of software components to a set of hardware components and we also need to satisfy some reliability conditions. We want the mapping to be as efficient as possible thus we need to reduce the communication traffic.

The problem can be seen as Generalized quadratic assignment problem where a set of data such as the frequency of communication of two components (f), distance between two components (h), decision variables (assignment vector x), set of components (c), constraints (separation and colocation, separation constraint tells that two software components can not be on the same machine and colocation tells two components are on the same machine) and the objective function is to minimize the communication traffic, which can be represented as

$$ \min_{x \in N}  \sum_{a \in c} \sum_{b \in c} f_{a,b}\ \cdot \ h_{x_a,x_b} $$

(The multiplication of frequency of communication matrix and distance matrix with respect to the assignments done will represent the communication traffic)

#### Symmetry Breaking in search
The basic idea is to take advantage of the symmetries in  optimization problems, by adding constraints that reduce the search space size and eliminate symmetries. Symmetries in a problem increase the size of the search space and therefore, time is wasted in visiting new solutions which are symmetric to the already visited solutions. 

Symmetry-breaking constraints can be added to the problem such that some of the symmetric solutions are eliminated from the search space while making sure that atleast one solution exists in the search space. Symmetry is common in many real-life combinatorial problems. For example, certain vehicles in the vehicle routing problem might be identical. For a valid routing plan, every permutation of such identical vehicles yields another valid routing plan with the same objective function value. The same goes for the scene allocation problem we&#39;ve seen previously for static constraints.

#### Randomization and restarts
Sometimes there is no obvious search ordering but the structure of the problem is such that there is a good ordering. It&#39;s just very difficult to find. So in these cases we use brute force. We randomly generate some ordering and if it doesn&#39;t work and we can&#39;t find a solution in reasonable time we stop early and restart the search by generating a different ordering.
The key idea:
- apply a heuristic but with randomization
- limit the time in the search
- if the time limit is reached, restart the search and possibly increase the limit


Let&#39;s go back to the magic square problem discussed in domain splitting. There are very slight modifications to be made in that approach. Instead of selecting the variable with the smallest domain, we randomly select one of the 3 variables which have the smallest domain. Also the entire process continues inside a repeat loop that runs until the time limit is reached. On reaching thee time limit, the time limit is increased by some small amount and the search starts again.

### Constraint-based scheduling
 Example:
 Minimizing the duration of a big project which has which needs to take in consideration different points for scheduling such as
- precedence constraints
  There may be some task which needs to come before some other task.
- disjunctive constraints
  This means two tasks assigned on the same machine can not overlap.
  
  Taking a real life example of building a bridge, the different components that need to be built need to be in an order and the resources that are used to build in the tasks can be exactly same and thus need to be shared.
  
  The method of model-based computing is used to state the problem. For stating the problem domain specific concepts such as activities, resources, precedence constraints are used. Behind the scene, these are compiled into decision constraints and global variables.
  
### The Jobshop scheduling problem

In this problem, we have a set of tasks that we have to schedule, where 
- Each task **t** has a duration **d(t)** associated with it.
- Each task **t** executes on machine **m(t)** and following the disjunctive constraints, two tasks scheduled on the same machine can not overlap in time.
- There is a set of precedence constraints (b,a)
which states that task **a** must start after task **b** has been completed.

The main objective of the problem is to minimize the project completion time.

![](https://i.imgur.com/hsXS61B.jpg)

The Job1 represents the sequence of activities and the activities with the same colour use the same machine for execution, for example as shown in the figure, all the tasks coloured in blue use the Machine k and that is why they can not overlap in time. In order to do so, the machine must handle the tasks in a sequential manner and thus we need to find an ordering of the tasks associated with a particular machine.

![](https://i.imgur.com/5fjjipi.jpg)

The machine executes the jobs sequentially where the ordering of the jobs depends on the precedence constraints provided. In the figure above we have all the possible links between every two tasks which are using a particular machine. We have to choose a subset of these links which are making a sequence. One of the orderings can be - 

![](https://i.imgur.com/xTfNhrR.jpg)

Thus, all the tasks associated with a machine are in a well defined order and machine follows the order while executing the tasks.

Once we have defined the order of tasks for every machine, we just need to consider the precedence constraints. We minimize the project duration under the precedence constraints, which is a polynomial time problem and thus we can use topological sorting for this purpose. For more sophisticated precedence constraints which also involve distances we use transitive closure (Floyd-Warshall algorithm).

**Model compilation**
- Every activity has three variables, the start date, the end date and the duration of activity, where the constraint linking these variables is
s + d = e
Thus for each activity we have three interdependent decision variables linked by the above constraint.

- According to the precedence constraint (b,a)
The start date of task a should be greater than or equal to the end date of task b.

- The resource constraints are compiled into global constraints which are disjunctive in nature, disjunctive($t_1$,...,$t_n$) tells that the activities $t_1$ to $t_n$ can not overlap.

#### Feasibility of Disjunctive constraints

Checking the feasiblity of Disjunctive constraints:
If for a single machine, we are given 3 jobs and the interval in which they can be scheduled and we want to schedule these tasks in such a manner that there is no overlap.
But, detecting feasiblity of Disjunctive constraints is a NP-complete problem.
Thus, instead of solving this exact problem, we will try relaxing the constraints.
The notation used is
$$s(\Omega) = min(t \ in \ \Omega) \ min(s_t)\\
e(\Omega) = max(t \ in \ \Omega) \ max(e_t)\\
d(\Omega) = sum(t \ in \ \Omega) \ min(d_t)$$
$s(\Omega)$ is the earliest time at which any task in $\Omega$ can start.
$e(\Omega)$ is the latest end date that any task in $\Omega$ can have.
$d(\Omega)$ is the total time taken by all tasks in $\Omega$

The Feasibility test we apply is
$s(t) + d(t) \le e(t)$

A better Feasibility test can be given as
for all $\Omega \in T:s(\Omega) + d(\Omega) \le e(\Omega)$
where we are looking at all subsets inside Task T and we need to consider only quadratic number of subsets.
The task interval for an interval t~1~ to t~2~ is the number of tasks having start date after t~1~ and end date before t~2~ and is represented as
$s(t_1,t_2) = \{ t \ in \ R \ | \ s(t) \ge s(t_1) \ and \ e(t) \le e(t_2) \}$
Thus now our feasibility test only looks at the all the task intervals.
The complexity is $O(|T|^3)$ as there are quadratic number of task intervals and the test itself is linear time.

Another algorithm which is quadratic time can be given. In this algorithm end date e is fixed and for tasks we perform the following process

![](https://i.imgur.com/VyHnZzu.png)

where the task having latest starting date is considered first.
We can do better than quadratic time, where we use preemptive scheduling and we get $O(|T|log|T|)$ algorithm.

#### Disjunctive Pruning
Edge finding rules are the set of rules used for pruning.
- Select a set of tasks $\Omega$ and a task $i \notin \Omega$
- Determining if $i$ must start after all tasks in $\Omega$:
$s(\Omega \cup i) + d(\Omega \cup i) &gt; e(\Omega)$
then we have to update the starting time of i accordingly:
$max(\gamma \subseteq \Omega)s(\gamma) + d(\gamma)$
and same can be done for ending date.
The edge finding rules can be strongly enforced in polynomial time.

Thus the basic strategy for Disjunctive Scheduling involves
1. Choose a machine
2. Sequence the tasks for the chosen machines
3. Repeate the process for other machines

For choosing the machine, we can apply first-fail principle. And in terms of choosing taks, we look at the tasks which can be scheduled first or last and the task is as tight as possible.

### Appendix:
1) Discrete optimization:
Discrete optimization is a branch of optimization in applied mathematics and computer science. some or all of the variables used in a discrete mathematical optimisation are restricted to be discrete variablesâ€”that is, to assume only a discrete set of values, such as the integers.
2) Decision variables:
Variables is a set of quantities that need to be determined in order to solve the problem. The variables are sometimes called decision variables because the problem is to decide what value each variable should take. 
3) Domain of decision variables:
The domain of decision variables is the set of all possible values that can be taken by the variables.
4) Global constraints:
A global constraint is a constraint that captures a relation between a non-fixed number of variables. An example is the constraint alldifferent(x1, . . . , xn), which specifies that the values assigned to the variables x1, . . . , xn must be pairwise distinct. Typically, a global constraint is semantically redundant in the sense that the same relation can be expressed as the conjunction of several simpler constraints. Having short hands for frequently recurring patterns clearly simplifies the programming task. What may be less obvious is that global constraints also facilitate the work of the constraint solver by providing it with a better view of the structure of the problem.
5. Symmetry:
Solution Symmetry - A solution symmetry is a permutation of the set of &lt;variable, value&gt; pairs which preserves the set of solutions. 
Problem Symmetry: A problem symmetry is a permutation of the set of &lt;variable, value&gt; pairs which preserves the set of constraints.
6. Redundant constraints:
A redundant constraint is a constraint that can be removed from a system of linear constraints without changing the feasible region.
7. Domain splitting:
This involves splitting a problem into a number of disjoint cases and solve each case separately. The set of all solutions to the initial problem is the union of the solutions to each case.
8. Disjunctive constraints:
Disjunctive constraints are widely used to ensure that the time intervals over which two activities require the same resource do not overlap in time.
9. Constraint based scheduling:
Constraint-based scheduling is an approach for solving real-life scheduling problems by stating constraints over the problem variables. By providing generic constraint satisfaction techniques on one side and specialised constraints on the other side, constraint programming achieves a very good generality and efficiency and thus it becomes very popular in solving real-life combinatorial (optimisation) problems.
10. Symmetry Breaking:
the method of symmetry-breaking constraints can be used to take advantage of symmetries in many constraint satisfaction and optimization problems, by adding constraints that eliminate symmetries and reduce the search space size.
Symmetries increase the size of the search space and therefore, time is wasted in visiting new solutions which are symmetric to the already visited solutions. The solution time can be reduced by adding new constraints, referred as symmetry breaking constraints, such that some of the symmetric solutions are eliminated from the search space while preserving the existence of at least one solution.


























</div>
        <div class="ui-toc dropup unselectable hidden-print" style="display:none;">
            <div class="pull-left dropdown">
                <a id="tocLabel" class="ui-toc-label btn btn-default" data-toggle="dropdown" href="#" role="button" aria-haspopup="true" aria-expanded="false" title="Table of content">
                    <i class="fa fa-bars"></i>
                </a>
                <ul id="ui-toc" class="ui-toc-dropdown dropdown-menu" aria-labelledby="tocLabel">
                </ul>
            </div>
        </div>
        <div id="ui-toc-affix" class="ui-affix-toc ui-toc-dropdown unselectable hidden-print" data-spy="affix" style="top:51px;display:none;"></div>
    </div>
</div>
<!-- clipboard modal -->
<div class="modal fade" id="clipboardModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-lg">
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span>
                </button>
                <h4 class="modal-title" id="myModalLabel">Import from clipboard</h4>
            </div>
            <div class="modal-body">
                <div contenteditable data-ph="Paste your markdown or webpage here..." id="clipboardModalContent" style="overflow:auto;max-height:50vh"></div>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-default" data-dismiss="modal">Cancel</button>
                <button type="button" class="btn btn-danger" id="clipboardModalClear">Clear</button>
                <button type="button" class="btn btn-primary" id="clipboardModalConfirm">Import</button>
            </div>
        </div>
    </div>
</div>
<!-- basic use modal -->
<div class="modal fade basic-use-modal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-sm">
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span>
                </button>
                <h4 class="modal-title" id="myModalLabel"><i class="fa fa-lock"></i> Advanced permission required</h4>
            </div>
            <div class="modal-body" style="color:black;">
                <h5>Your current role can only read. Ask the system administrator to acquire write and comment permission.</h5>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-primary ui-request-permission">Request permission</button>
                <button type="button" class="btn btn-default" data-dismiss="modal">Cancel</button>
            </div>
        </div>
    </div>
</div>
<!-- team locked modal -->
<div class="modal fade team-locked-modal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-sm">
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span>
                </button>
                <h4 class="modal-title" id="myModalLabel"><i class="fa fa-lock"></i> This team is disabled</h4>
            </div>
            <div class="modal-body" style="color:black;">
                <h5>Sorry, this team is disabled. You can&#39;t edit this note.</h5>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-danger" data-dismiss="modal">OK</button>
            </div>
        </div>
    </div>
</div>
<!-- locked modal -->
<div class="modal fade locked-modal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-sm">
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span>
                </button>
                <h4 class="modal-title" id="myModalLabel"><i class="fa fa-lock"></i> This note is locked</h4>
            </div>
            <div class="modal-body" style="color:black;">
                <h5>Sorry, only owner can edit this note.</h5>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-danger" data-dismiss="modal">OK</button>
            </div>
        </div>
    </div>
</div>
<!-- limit modal -->
<div class="modal fade limit-modal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-sm">
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span>
                </button>
                <h4 class="modal-title" id="myModalLabel"><i class="fa fa-exclamation-triangle"></i> Reach the limit</h4>
            </div>
            <div class="modal-body" style="color:black;">
                <h5>Sorry, you&#39;ve reached the max length this note can be.</h5>
                <strong>Please reduce the content or divide it to more notes, thank you!</strong>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-warning" data-dismiss="modal">OK</button>
            </div>
        </div>
    </div>
</div>
<!-- gist import modal -->
<div class="modal fade" id="gistImportModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span>
                </button>
                <h4 class="modal-title" id="myModalLabel">Import from Gist</h4>
            </div>
            <div class="modal-body">
                <input type="url" class="form-control" placeholder="Paste your gist url here... (like: https://gist.github.com/username/gistid)" id="gistImportModalContent">
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-default" data-dismiss="modal">Cancel</button>
                <button type="button" class="btn btn-danger" id="gistImportModalClear">Clear</button>
                <button type="button" class="btn btn-primary" id="gistImportModalConfirm">Import</button>
            </div>
        </div>
    </div>
</div>
<!-- snippet import modal -->
<div class="modal fade" id="snippetImportModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span>
                </button>
                <h4 class="modal-title" id="myModalLabel">Import from Snippet</h4>
            </div>
            <div class="modal-body">
                <input type="hidden" id="snippetImportModalAccessToken" />
                <input type="hidden" id="snippetImportModalBaseURL" />
                <div class="ui-field-contain" style="display:table;margin-bottom:10px;width:100%;">
                    <div style="display:table-row;margin-bottom:5px;">
                        <label style="display:table-cell;">Project:</label>
                        <select class="form-control" id="snippetImportModalProjects" style="display:table-cell;" disabled="disabled">
                            <option value="init" selected="selected" disabled="disabled">Select From Available Projects</option>
                        </select>
                    </div>
                    <div style="display:table-row;">
                        <label style="display:table-cell;">Snippet:</label>
                        <select class="form-control" id="snippetImportModalSnippets" style="display:table-cell;" disabled="disabled">
                            <option value="init" selected="selected" disabled="disabled">Select From Available Snippets</option>
                        </select>
                    </div>
                </div>
                <p class="snippet-import-or">or</p>
                <input type="url" class="form-control" placeholder="/projects/:id/snippets/:snippet_id" id="snippetImportModalContent" disabled="disabled">
            </div>
            <div class="modal-footer">
                <span id="snippetImportModalLoading"><i class="fa fa-refresh fa-spin fa-fw"></i></span>
                <button type="button" class="btn btn-default" data-dismiss="modal">Cancel</button>
                <button type="button" class="btn btn-danger" id="snippetImportModalClear">Clear</button>
                <button type="button" class="btn btn-primary" id="snippetImportModalConfirm" disabled="disabled">Import</button>
            </div>
        </div>
    </div>
</div>
<!-- snippet export modal -->
<div class="modal fade" id="snippetExportModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span>
                </button>
                <h4 class="modal-title" id="myModalLabel">Export to Snippet</h4>
            </div>
            <div class="modal-body">
                <input type="hidden" id="snippetExportModalAccessToken" />
                <input type="hidden" id="snippetExportModalBaseURL" />
                <div class="ui-field-contain" style="display:table;margin-bottom:10px;width:100%;">
                    <div style="display:table-row;margin-bottom:5px;">
                        <label style="display:table-cell;">Title:</label>
                        <input class="form-control" placeholder="new snippet" type="text" id="snippetExportModalTitle" />
                    </div>
                    <div style="display:table-row;margin-bottom:5px;">
                        <label style="display:table-cell;">File Name:</label>
                        <input class="form-control" placeholder="new_snippet.md" type="text" id="snippetExportModalFileName" />
                    </div>
                    <div style="display:table-row;margin-bottom:5px;">
                        <label style="display:table-cell;">Project:</label>
                        <select class="form-control" id="snippetExportModalProjects" style="display:table-cell;">
                            <option value="init" selected="selected" disabled="disabled">Select From Available Projects</option>
                        </select>
                    </div>
                    <div style="display:table-row;margin-bottom:5px;">
                        <label style="display:table-cell;">Visibility:</label>
                        <select class="form-control" id="snippetExportModalVisibility" style="display:table-cell;">
                            <option value="" selected="selected" disabled="disabled">Select Visibility Level</option>
                            <option value="0">Private</option>
                            <option value="10">Internal</option>
                        </select>
                    </div>
                </div>
            </div>
            <div class="modal-footer">
                <span id="snippetExportModalLoading"><i class="fa fa-refresh fa-spin fa-fw"></i></span>
                <button type="button" class="btn btn-default" data-dismiss="modal">Cancel</button>
                <button type="button" class="btn btn-primary" id="snippetExportModalConfirm">Export</button>
            </div>
        </div>
    </div>
</div>
<!-- delete modal -->
<div class="modal fade delete-modal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-sm">
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span>
                </button>
                <h4 class="modal-title" id="myModalLabel">Are you sure?</h4>
            </div>
            <div class="modal-body" style="color:black;">
                <h5 class="ui-delete-modal-msg">Do you really want to delete this note?</h5>
                <strong class="ui-delete-modal-item">All users will lost their connection.</strong>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-default" data-dismiss="modal">Cancel</button>
                <button type="button" class="btn btn-danger ui-delete-modal-confirm">Yes, do it!</button>
            </div>
        </div>
    </div>
</div>

<!-- template notes modal -->
<div class="modal fade template-modal" id="templateModal" tabindex="-1" role="dialog" aria-labelledby="mySmallModalLabel" aria-hidden="true"  >
    <div class="modal-dialog modal-lg" style="width: calc(100vw - 20px); max-width: 1000px;">
        <div class="modal-content template-content">
            <div class="modal-header">
                <button type="button" class="close ui-template-cancel visible-xs hidden-xs" style="margin-top: 2px !important; font-size: 15px !important; display: none;"><span aria-hidden="true">Cancel</span></button>
                <button type="button" class="close ui-template-close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true"><i class="fa fa-times fa-18"></i></span></button>
                <h4 class="modal-title ui-template-title" id="mySmallModalLabel"><i class="fa fa-file-image-o"></i> <span>Create a note from template</span></h4>
                <h4 class="modal-title visible-xs hidden-xs ui-template-title-xs"><i class="fa fa-file-image-o"></i> <span>Create a note from template</span></h4>
            </div>
            <div class="modal-body" style="padding: 0px;">
                <div class="row">
                    <div class="col-sm-8 template-preview-container hidden-xs">
                        <div>
                            <div class="ui-template-spinner unselectable hidden-print"></div>
                            <iframe class="template-viewer" style="width: 100%; height: 100%; border: none;"></iframe>
                            <div class="template-empty ui-template-viewer-empty" style="display: none; margin: 0px;">
                                <img src="https://hackmd.io/not-available.svg">
                                <div>
                                    <div>Oops...</div>
                                    <div>This template is not available.</div>
                                </div>
                            </div>
                        </div>
                        <button type="button" class="visible-xs btn btn-primary ui-use-template-btn-mobile">Use this template</button>
                    </div>
                    <div class="col-sm-4 template-list-container">
                        <div class="ui-templates-container">
                            
                                <button type="button" class="btn btn-default ui-create-template-btn"><span style="margin-right: -20px;">Create new template</span><i class="fa fa-plus fa-fw" style="float: right; margin-top: 3px;"></i></button>
                            
                            <div class="dropdown ui-template-list-filter" style="margin: 20px;">
                                <a class="ui-template-list-filter-label" id="template-list-filter" data-filter-type="all" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false"><span>All</span><i class="fa fa-angle-down" aria-hidden="true" style="margin-left: 10px;"></i></a>
                                <ul class="dropdown-menu" role="menu" aria-labelledby="template-list-filter" style="right: 0px; left: auto;">
                                    <li role="presentation"><a role="menuitem" class="ui-template-filter-all" tabindex="-1" href="#">All</a></li>
                                    
                                    <li role="presentation"><a role="menuitem" class="ui-template-filter-default" tabindex="-1" href="#">Default</a></li>
                                    <li role="presentation"><a role="menuitem" class="ui-template-filter-personal" tabindex="-1" href="#">Personal</a></li>
                                    
                                    <li role="presentation"><a role="menuitem" class="ui-template-filter-team" tabindex="-1" href="#">Team</a></li>
                                    
                                    <li role="presentation"><a role="menuitem" class="ui-template-filter-shared" tabindex="-1" href="#">Shared with me</a></li>
                                    
                                </ul>
                            </div>
                            <div class="template-empty ui-template-list-empty">
                                <i class="fa fa-file-image-o" aria-hidden="true"></i>
                                <div>No template found.</div>
                            </div>
                            <div class="list-group ui-template-list" style="flex:1;">
                            </div>
                            <button type="button" class="btn btn-primary ui-use-template-btn hidden-xs">Use this template</button>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<!-- create template modal -->
<div class="modal fade create-template-modal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true"  >
    <div class="modal-dialog modal-sm">
        <div class="modal-content template-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal" aria-label="Close" style="margin-top: 2px; height: 17px;"><span aria-hidden="true"><i class="fa fa-times fa-18"></i></span>
                </button>
                <h4 class="modal-title" id="myModalLabel">Create a template</h4>
            </div>
            <div class="modal-body text-center" style="color:black; padding: 20px; padding-bottom: 10px; text-align: left;">
                <label for="templateName" style="font-size:18px; font-weight: normal;">Template name</label>
                <input type="text" id="templateName" class="form-control" placeholder="Template name" aria-label="TemplateName" aria-describedby="template-name" maxlength="250">
            </div>
            <div class="modal-footer" style="border: none; padding: 20px;">
                <button type="button" class="btn btn-primary ui-create-template-modal-confirm" style="min-width:54px;">OK</button>
            </div>
        </div>
    </div>
</div>

<!-- delete template modal -->
<div class="modal fade delete-template-modal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-sm">
        <div class="modal-content template-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal" aria-label="Close" style="margin-top: 2px; height: 17px;"><span aria-hidden="true"><i class="fa fa-times fa-18"></i></span>
                </button>
                <h4 class="modal-title" id="myModalLabel">Delete template</h4>
            </div>
            <div class="modal-body text-center" style="color:black; padding: 14.5px 15px; padding-bottom: 0px; text-align: left;">
                <p class="ui-delete-modal-msg" style="font-size: 15px;">Do you really want to delete this template?</p>
                <div class="form-check" style="display: flex;">
                    <input type="checkbox" class="form-check-input ui-delete-note-check" style="margin-top: 7px;" id="deleteNoteCheck">
                    <label class="form-check-label" style="margin-top: 3px; margin-left: 5px; font-weight: 400;" for="deleteNoteCheck">
                        Keep the content
                        <div style="font-size: 13px; margin-top: 5px; color: #818181; line-height: 18px;">Turn this template into a regular note and keep its content, versions, and comments.</div>
                    </label>
                </div>
            </div>
            <div class="modal-footer" style="border: none; padding: 20px 15px; display: flex;">
                <button type="button" class="btn btn-default" data-dismiss="modal" style="flex:1;">Cancel</button>
                <button type="button" class="btn btn-danger ui-delete-template-modal-confirm" style="flex:1;">Yes</button>
            </div>
        </div>
    </div>
</div>

<!-- refresh modal -->
<div class="modal fade" id="refreshModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-sm">
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span>
                </button>
                <h4 class="modal-title" id="myModalLabel">This page need refresh</h4>
            </div>
            <div class="modal-body">
                <div class="incompatible-version">
                    <h5>You have an incompatible client version.</h5>
                    <strong>Refresh to update.</strong>
                </div>
                <div class="new-version" style="display:none;">
                    <h5>New version available!</h5>
                    <a href="https://hackmd.io/s/release-notes" target="_blank">See releases notes here</a>
                    <br>
                    <strong>Refresh to enjoy new features.</strong>
                </div>
                <div class="user-state-changed" style="display:none;">
                    <h5>Your user state has changed.</h5>
                    <strong>Refresh to load new user state.</strong>
                </div>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-primary" id="refreshModalRefresh">Refresh</button>
            </div>
        </div>
    </div>
</div>

<!-- signin modal -->
<div class="modal fade signin-modal" tabindex="-1" role="dialog" aria-labelledby="mySmallModalLabel" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <button type="button" class="close" data-dismiss="modal" aria-label="Close" style="margin-top: 10px; right: 20px; position: absolute;"><span aria-hidden="true">&times;</span></button>
            






    






<h3>Sign in</h3>

<form data-toggle="validator" role="form" class="form-horizontal" method="post" enctype="application/x-www-form-urlencoded">
    <div class="dn"><input type="hidden" name="_csrf" value="1IyaCt8F-tsDZbXeGzXLikkGsCkb4TCUVFvU"></div>
    <div class="dn"><input type="hidden" name="create_team" value="false"></div>
    <div class="dn"><input type="hidden" name="create_paid_team" value="false"></div>
    <div class="form-group  ">
        <label for="email" class="control-label">Email</label>
        <label for="inputEmail" class="control-label pull-right errors">
            
        </label>
        <span class="help-block control-label with-errors pull-right" style="display: inline;"></span>
        <div class="input-block">
            
                <input type="email" class="form-control" name="email" placeholder="Your email" required autocomplete="email">
            
            <span class="error-sign"></span>
        </div>
    </div>
    <div class="form-group ">
        <label for="password" class="control-label">Password</label>
        <label for="inputPassword" class="control-label pull-right errors">
            
        </label>
        <span class="help-block control-label with-errors pull-right" style="display: inline;"></span>
        <div class="input-block">
            <input type="password" class="form-control" name="password" placeholder="Your password" required autocomplete="current-password">
            <span class="error-sign"></span>
            
                <span class="control-label pull-right" style="font-size: 13px; margin-top: 5px;"><a href="https://hackmd.io/settings/forgotPassword" style="text-decoration: underline;">Forgot password</a></span>
            
        </div>
    </div>

    <div style="text-align: center; padding-top: 15px; margin-bottom: 0px;">
        
            <input type="submit" class="btn btn-success btn-large" formaction="https://hackmd.io/login" value="Sign in">
        

        
    </div>
</form>








    
        <p class="seperator">or</p>
    

    
        <p>By clicking below, you agree to our <a href="https://hackmd.io/s/terms" target="_blank">terms of service</a>.</p>
    

    <div class="social-buttons-container">
    
    <a href="https://hackmd.io/auth/facebook" class="btn btn-lg btn-block btn-social btn-facebook">
        <i class="fa fa-facebook"></i> Sign in via Facebook
    </a>
    
    
    <a href="https://hackmd.io/auth/twitter" class="btn btn-lg btn-block btn-social btn-twitter">
        <i class="fa fa-twitter"></i> Sign in via Twitter
    </a>
    
    
    <a href="https://hackmd.io/auth/github" class="btn btn-lg btn-block btn-social btn-github">
        <i class="fa fa-github"></i> Sign in via GitHub
    </a>
    
    
    <a href="https://hackmd.io/auth/dropbox" class="btn btn-lg btn-block btn-social btn-dropbox">
        <i class="fa fa-dropbox"></i> Sign in via Dropbox
    </a>
    
    
    <a href="https://hackmd.io/auth/google" class="btn btn-lg btn-block btn-social btn-google">
        <i class="icon icon-google"></i> Sign in via Google
    </a>
    
    
</div>





    <div >
        <p>New to HackMD? <a href="https://hackmd.io/join">Sign up</a></p>
    </div>


        </div>
    </div>
</div>

<!-- help modal -->
<div class="modal fade help-modal" tabindex="-1" role="dialog" aria-labelledby="mySmallModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-lg">
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span>
                </button>
                <h4 class="modal-title" id="mySmallModalLabel"><i class="fa fa-question-circle"></i> Help</h4>
            </div>
            <div class="modal-body">
                <div class="row">
                    <div class="col-lg-3">
                        <div class="panel panel-default">
                            <div class="panel-heading">
                                <h3 class="panel-title">Documents</h3>
                            </div>
                            <div class="panel-body">
                                <a href="https://hackmd.io/c/tutorials" title="Tutorials" target="_blank"><i class="fa fa-dot-circle-o fa-fw" style="margin-right: 3px;"></i>Tutorials</a>
                                <br>
                                <a href="./yaml-metadata" title="YAML Metadata" target="_blank"><i class="fa fa-dot-circle-o fa-fw" style="margin-right: 3px;"></i>YAML Metadata</a>
                                <br>
                                <a href="./slide-example" title="Slide Example" target="_blank"><i class="fa fa-dot-circle-o fa-fw" style="margin-right: 3px;"></i>Slide Example</a>
                                <br>
                                <a href="./book-example" title="Book Example" target="_blank"><i class="fa fa-dot-circle-o fa-fw" style="margin-right: 3px;"></i>Book Example</a>
                            </div>
                        </div>
                        
                        <div class="panel panel-default">
                            <div class="panel-heading">
                                <h3 class="panel-title">Contacts</h3>
                            </div>
                            <div class="panel-body">
                                <a href="https://www.messenger.com/t/hackmdio" target="_blank"><i class="fa fa-comments fa-fw" style="margin-right: 3px;"></i>Talk to us</a>
                                <br>
                                <a href="https://github.com/hackmdio/hackmd-io-issues/issues" target="_blank"><i class="fa fa-bug fa-fw" style="margin-right: 3px;"></i>Report an issue</a>
                                <br>
                                <a href="mailto:support@hackmd.io"><i class="fa fa-envelope fa-fw" style="margin-right: 3px;"></i>Send us email</a>
                            </div>
                        </div>
                        
                    </div>
                    <div class="col-lg-9">
                        <div class="panel panel-default">
                            <div class="panel-heading">
                                <h3 class="panel-title">Cheatsheet</h3>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<!-- revision modal -->
<div class="modal fade" id="revisionModal" tabindex="-1" role="dialog" aria-labelledby="mySmallModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-lg" style="width: calc(100vw - 20px); max-width: 1000px;">
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span>
                </button>
                <h4 class="modal-title" id="mySmallModalLabel"><i class="fa fa-history"></i> Versions and GitHub Sync</h4>
            </div>
            <div class="modal-body">
                <div class="row">
                    <div class="col-sm-4" style="max-height: calc(100vh - 215px); overflow: auto;">
                        <div class="list-group ui-revision-list"></div>
                    </div>
                    <div class="col-sm-8" style="height: calc(100vh - 215px); overflow: hidden;">
                        <textarea id="revisionViewer" style="display:none;"></textarea>
                    </div>
                </div>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-default" data-dismiss="modal">Cancel</button>
                <button type="button" class="btn btn-primary" id="revisionModalDownload">Download</button>
                <button type="button" class="btn btn-danger" id="revisionModalRevert">Revert</button>
            </div>
        </div>
    </div>
</div>

<!-- revision modal -->
<div class="modal fade" id="namedRevisionModal" tabindex="-1" role="dialog" aria-labelledby="mySmallModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-lg" style="width: calc(100vw - 20px); max-width: 1200px; height: calc(100vh - 100px);">
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span>
                </button>
                <button type="button" class="close back" aria-label="Back"><span aria-hidden="true"><i class="fa fa-arrow-left" aria-hidden="true"></i></span>
                </button>
                <h4 class="modal-title" id="mySmallModalLabel"><i class="fa fa-history"></i> Versions and GitHub Sync</h4>
            </div>
            <div class="container-fluid modal-body pa-0 github-sync-enabled" style="max-height: calc(100vh - 100px); height: calc(100vh - 100px); overflow: hidden;">
                
                <div class="hidden-xs ui-github-sync" style="height: 51px; border-bottom: solid 1px #e7e7e7;">
                    <div style="display: none;" class="signin-to-connect">
                        Sign in to link this note to GitHub
                        <button class="btn btn-success" style="margin-left: 30px" data-toggle="modal" data-target=".signin-modal">Sign in to HackMD</button>
                        <a href="https://hackmd.io/c/tutorials/%2Fs%2Flink-with-github" target="_blank" style="margin-left: 30px;"><span>Learn more</span><i class="fa fa-angle-right fa-fw"></i></a></a>
                    </div>
                    <div style="display: none;" class="no-connect-github">
                        This note is not linked with GitHub
                        <button class="btn btn-primary btn-outline ui-github-pull" style="margin-left: 30px">Pull from GitHub</button>
                        <button class="btn btn-primary btn-outline ui-github-push" style="margin-left: 10px">Push to GitHub</button>
                        <a href="https://hackmd.io/c/tutorials/%2Fs%2Flink-with-github" target="_blank" style="margin-left: 30px;"><span>Learn more</span><i class="fa fa-angle-right fa-fw"></i></a></a>
                    </div>
                    <div style="display: none;" class="github-status">
                        <i class="fa fa-github"></i>&nbsp;<div class="github-path-container"><a target="_blank" class="github-path" title="" data-toggle="tooltip" data-placement="bottom" data-offset="30px,5" data-container=".github-status" data-original-title=""></a></div></span>

                        <a class="ui-github-badge github-control site-ui-font" style="margin-left: 30px;">
                            <i class="fa fa-link fa-18"></i>
                            Add badge
                        </a>
                        <a class="ui-github-pull github-control" style="margin-left: 30px;">
                            <i class="fa fa-arrow-down fa-18"></i>
                            Pull
                        </a>
                        <a class="ui-github-push github-control"  style="margin-left: 30px;">
                            <i class="fa fa-arrow-up fa-18"></i>
                            Push
                        </a>
                        <a class="ui-show-github-synced-settings-modal github-control" style="margin-left: 30px;">
                            <i class="fa fa-cog fa-18"></i>
                            GitHub Link Settings
                        </a>
                    </div>
                </div>
                
                <div class="col-xs-12 col-sm-4 pl-0 pr-0 sidebar revision-list-container">
                    <div class="list-group ui-named-revision-list"></div>
                </div>
                <div id="revision-editor-container" class="col-xs-12 col-sm-8 pl-0 pr-0 flex flex-column">
                    <div id="revisionSummary" style="display: none;" class="flex">
                        <h4 style="margin-right: 5px;">
                            <i class="fa fa-history"></i>
                        </h4>

                        <div class="flex flex-column flex-auto">
                            <h4 class="summary-title"></h4>
                            <p class="summary-author-info flex flex-wrap-xs">
                                <span class="summary-timestamp" style="margin-right: 15px;"></span>
                                <span>Version named by &nbsp;</span>
                                <span class="summary-authorship">
                                    <a href="#"></a> &nbsp;
                                </span>
                                <span></span>
                            </p>
                            <div class="flex items-end justify-between">
                                <p class="summary-description" style="margin-bottom: 22px;"></p>
                                <div class="summary-collapse-toggle">
                                    <span class="expand">
                                        More
                                        <i class="fa fa-angle-down" aria-hidden="true"></i>
                                    </span>
                                    <span class="collapse">
                                        Less
                                        <i class="fa fa-angle-up" aria-hidden="true"></i>
                                    </span>
                                </div>
                            </div>
                        </div>

                        <div class="dropdown-container dni-xs" id="revisionSummaryDropdown">
                            <ul class="dropdown-menu" role="menu" aria-labelledby="menu">
                                <li role="presentation">
                                    <a role="menuitem" class="ui-rename-revision" id="rename-named-revision-button" tabindex="-1" href="#">
                                        <i class="fa fa-pencil fa-fw"></i> Edit
                                    </a>
                                </li>

                                <li role="presentation">
                                    <a role="menuitem" class="ui-delete-revision" tabindex="-1" href="#" id="remove-named-revision-button">
                                    <i class="fa fa-trash fa-fw"></i> Delete</a>
                                </li>
                            </ul>
                            <a class="ui-revision-action-menu" data-toggle="dropdown" style="color: #777;" aria-expanded="false"><i class="fa fa-ellipsis-h fa-fw" style="vertical-align: middle; width:100%;"></i>
                            </a>
                        </div>

                        <div class="create-revision-button-container flex items-center dni-xs">
                            <i class="fa fa-question-circle fa-fw tooltip-align-left" style="color: #CDCDCD; margin-right: 10px;" title="" data-toggle="tooltip" data-placement="bottom" data-offset="0,5" data-original-title="Save current content into a named version."></i>
                            <button class="btn btn-outline btn-primary ui-create-revision-button" title="Note content is identical to the latest version." data-toggle="tooltip" data-placement="bottom" data-offset="0,5">
                                Save as version
                            </button>
                        </div>
                    </div>

                    <form data-toggle="validator" id="namedRevisionForm" style="display: none;" class="flex flex-column dni-xs" role="form">
                        <h4 style="display: none;" class="revision-timestamp">
                            <i style="margin-right: 1px;" class="fa fa-history"></i>
                            <span></span>
                        </h4>
                        <div class="flex" style="margin-top: 10px;">
                            <div class="flex flex-column flex-auto">
                                <div class="flex items-center form-group">
                                    <label class="control-label" for="name">
                                        Name
                                    </label>
                                    <input class="form-control" name="name" type="text" placeholder="Please name the version" required maxlength="80">
                                </div>

                                <div class="flex items-start form-group">
                                    <label class="control-label" for="description">
                                        Description
                                    </label>
                                    <textarea rows="3" class="form-control" name="description" placeholder="Please describe the version (optional)" maxlength="500" style="max-height: 74px; resize: none;"></textarea>
                                    <div class="help-block with-errors"></div>
                                </div>
                            </div>
                            <div class="flex items-end form-group" style="margin-left: 40px;">
                                <strong class="ui-state-message" style="position: absolute; top: 20px; color:green; padding-right: 15px;">
                                    Note content is identical to the latest version.
                                </strong>
                                <button type="button" id="cancel-named-revision-button" class="btn btn-default" style="margin-right: 10px;">Cancel</button>
                                <button type="submit" id="submit-named-revision-button" class="btn btn-primary">
                                    Name this version
                                </button>
                            </div>
                        </div>
                    </form>

                    <div style="height: calc(100vh - 140px); overflow: hidden;">
                        <textarea id="namedrevisionViewer" style="display:none;"></textarea>
                    </div>

                    <div class="flex justify-between items-center dni-xs" id="revision-operation-panel">
                        <!-- #region Compare revision dropdown menu -->
                        <div class="diff-revision-menu flex items-center">
                            <span>
                                <input type="checkbox" name="compareWithLastVersion" checked>
                            </span>
                            <span>
                                Compare with
                            </span>
                            <div class="btn-group dropup" id="diff-revision-dropdown-menu">
                                <button class="btn btn-default dropdown-toggle ui-diff-revision-menu flex items-center justify-between" type="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="true">
                                    <span>
                                        Previous version
                                    </span>
                                    <i class="fa fa-angle-down fa-12" aria-hidden="true" style="margin-left: 5px;"></i>
                                </button>
                                <ul class="dropdown-menu pull-left" aria-labelledby="diff-revision-dropdown-menu">
                                    <div class="dropdown-section">
                                        <div class="section-header">
                                            Choose a version
                                        </div>

                                        <div class="section-filter">
                                            <span>
                                                <input id="showOnlyNamedRevision" type="checkbox" name="showOnlyNamedRevision">
                                                <label for="showOnlyNamedRevision">
                                                    Only named versions
                                                </label>
                                            </span>
                                        </div>
                                    </div>
                                    <div class="revision-list-container d-flex justify-center">
                                        <div class="revision-list-inner">
                                        </div>
                                        <div class="empty-revision-list">
                                            <div class="search-icon">
                                                <img src="https://hackmd.io/empty-search-result.svg" alt="No search result">
                                            </div>
                                            Version not found
                                        </div>
                                    </div>
                                </ul>
                            </div>
                            <span>
                                
                            </span>
                        </div>
                        <!-- #endregion -->

                        <div>
                            <button type="button" class="btn btn-danger btn-outline ui-revisionModalRevert" style="margin-right: 10px; display: none;">Revert</button>
                            <button type="button" class="btn btn-primary btn-outline ui-revisionModalDownload">Download</button>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<!-- message modal -->
<div class="modal fade message-modal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
  <div class="modal-dialog modal-sm">
      <div class="modal-content">
          <div class="modal-header">
              <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span>
              </button>
              <h4 class="modal-title" id="myModalLabel"></h4>
          </div>
          <div class="modal-body" style="color:black;">
              <h5 style="font-weight: 500; font-size: 14px; text-align: left;"></h5>
              <a target="_blank" style="word-break: break-all;" rel="noopener"></a>
          </div>
          <div class="modal-footer">
              <button type="button" class="btn btn-default" data-dismiss="modal">OK</button>
          </div>
      </div>
  </div>
</div>
<!-- feedback modal -->
<div class="modal fade feedback-modal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
  <div class='modal-dialog modal-lg' role='document'>
    <div class='modal-content'>
      <div class='modal-header' style="padding: 8px 15px; font-weight: 700">
        <button type='button' class='close' aria-label='Close' style="font-size: 26px; margin-top: -1px;" data-dismiss="modal">
          <span aria-hidden='true'>&times;</span>
        </button>
        <h4 class='modal-title'>Feedback</h4>
      </div>
      <div class='modal-body' style="text-align: left;">
        <div class='alert alert-danger' style="display: none;">
          <i class='fa fa-exclamation-triangle' aria-hidden='true' style="margin-right: 5px"></i>
          Submission failed, please try again
        </div>
        <h3 style="margin-top:5px">Thanks for your support.</h3>
        <p>On a scale of 0-10, how likely is it that you would recommend HackMD to your friends, family or business associates?</p>
        <div class="rating-group" style="margin-top: 15px; margin-bottom: 30px;"></div>
        <p style="font-size:16px">Please give us some advice and help us improve HackMD.</p>
        <form role='form' data-toggle='validator'>
          <div class='form-group' style="margin-bottom: 10px;">
            <textarea name='feedback' class='form-control' placeholder="Enter your feedback" rows="3" style="resize: none;" required></textarea>
          </div>
          <div class='checkbox' style="font-size:16px">
            <label>
              <input name='engage' type='checkbox' checked />
              Iâ€™m willing to participate in user experience research or beta testing so HackMD could build things I want.
            </label>
          </div>
          <div class='form-group flex items-center' style="font-size: 16px; padding-left: 20px;">
            <label style="font-weight: normal;">My Email:</label>
            &nbsp;
            <div class='flex-auto pr-0'>
              <input type='email' name='email' class='form-control col-sm-9' aria-describedby='helpId' placeholder="Email address" required />
            </div>
          </div>
          <div class='modal-footer' style="padding: 15px 0; border: none;">
            <button type='button' class='btn btn-default' data-dismiss="modal">Cancel</button>
            <button type='submit' class='btn btn-primary ui-feedback-submit'>Submit</button>
          </div>
        </form>
      </div>
    </div>
  </div>
</div>

<!-- feedback success modal -->
<div class="modal fade feedback-success-modal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
  <div class='modal-dialog modal-sm' role='document'>
    <div class='modal-content'>
      <div class='modal-body' style="padding: 50px 20px; text-align: center;">
        <img src="/images/feedback.svg" width="85" height="95" />
        <h4>Thanks for your feedback</h4>
      </div>
    </div>
  </div>
</div>

<!-- action modal -->
<div class="modal fade action-modal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-sm">
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span>
                </button>
                <h4 class="modal-title" id="myModalLabel"></h4>
            </div>
            <div class="modal-body" style="color:black;">
                <p></p>
            </div>
            <div class="flex modal-footer">
                <button type="button" class="btn btn-default cancel flex-one" data-dismiss="modal">Cancel</button>
                <button type="button" class="btn btn-primary yes flex-one" data-dismiss="modal">OK</button>
            </div>
        </div>
    </div>
</div>

<!-- action modal -->
<div class="modal fade remove-revision-modal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-sm">
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span>
                </button>
                <h4 class="modal-title" id="myModalLabel">Remove version name</h4>
            </div>
            <div class="modal-body" style="color:black;">
                <h5>Do you want to remove this version name and description?</h5>
            </div>
            <div class="flex modal-footer">
                <button type="button" class="btn btn-default flex-one" data-dismiss="modal">Cancel</button>
                <button type="button" class="btn btn-danger flex-one" data-dismiss="modal">OK</button>
            </div>
        </div>
    </div>
</div>

<!-- transfer modal -->
<div class="modal fade transfer-modal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-sm">
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span>
                </button>
                <h4 class="modal-title" id="myModalLabel">Transfer ownership</h4>
            </div>
            <div class="modal-body" style="color:black; overflow: inherit; padding-bottom: 0;">
                Transfer to

                <div class="form-group" style="margin-bottom: 0;">
                    <div class="radio">
                        <label>
                            <input type="radio" name="transfer-type" value="team" required checked="checked">
                            <span>
                                Team you&#39;ve joined
                            </span>
                        </label>
                    </div>

                    <div class="dropdown btn-group ui-transfer-modal-team-dropdown" style="width: 100%; margin-bottom: 10px;">
                        <button class="btn btn-default text-left dropdown-toggle" type="button" style="width: 100%; height: 40px;" id="dropdownMenuTransferToTeam" data-toggle="dropdown" aria-haspopup="true" aria-expanded="true">
                            <span class="ui-transfer-modal-team-label" style="line-height: 18px;">
                                No teams available
                            </span>

                            <span class="caret" style="position: absolute; top: 17px; right: 10px;"></span>
                        </button>

                        <ul class="dropdown-menu" aria-labelledby="dropdownMenuTransferToTeam" style="width: 100%;"></ul>
                    </div>
                    <div class="public-team-notice" style="font-size: 12px; color: #C9302C; display: none;">
                        Warning: <span class="team-name"></span> is a <b>public team</b>. If you transfer note to this team, <b>everyone on the web can find and read this note.</b>
                    </div>

                    <div class="radio transfer-team-radio">
                        <label>
                            <input type="radio" name="transfer-type" value="member" required>
                            <span>
                                Current team member
                            </span>
                        </label>
                    </div>

                    <div class="dropdown btn-group ui-transfer-modal-team-member-dropdown" style="width: 100%; margin-bottom: 10px;">
                        <button class="btn btn-default text-left dropdown-toggle" type="button" style="width: 100%; height: 40px;" id="dropdownMenuTransferToTeamMember" data-toggle="dropdown" aria-haspopup="true" aria-expanded="true">
                            <span class="ui-transfer-modal-team-member-label" style="line-height: 18px;">
                                No team members available
                            </span>

                            <span class="caret" style="position: absolute; top: 17px; right: 10px;"></span>
                        </button>

                        <ul class="dropdown-menu" aria-labelledby="dropdownMenuTransferToTeamMember" style="width: 100%;"></ul>
                    </div>
                </div>

                <div class="error text-danger" style="display: none; margin-top: 10px; color: red;"></div>
            </div>

            <div class="modal-footer">
                <button type="button" class="btn btn-default" data-dismiss="modal">
                    Cancel
                </button>

                <button type="button" class="btn btn-danger ui-transfer-modal-confirm" disabled>
                    Transfer
                </button>
            </div>
        </div>
    </div>
</div>


<!-- github signin modal -->
<div class="modal fade github-signin-modal text-left" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-lg">
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span>
                </button>
                <h4 class="modal-title" id="myModalLabel">Link with GitHub</h4>
            </div>
            <div class="modal-body" style="color:black;">
                <h4 style="border-bottom: 2px solid #cccccc; padding-bottom: 15px; margin: 5px 0px 30px 0px">Please authorize HackMD on GitHub</h4>
                <p style="margin-bottom: 15px;">Please sign in to GitHub and install the HackMD app on your GitHub repo. <a href="https://hackmd.io/c/tutorials/%2Fs%2Flink-with-github" target="_blank">Learn more</a></p>
                <a href=https://github.com/login/oauth/authorize?client_id=Iv1.dce7f04830297ce5&amp;redirect_uri=https%3A%2F%2Fhackmd.io%2Fapi%2Fgithub%2Fsync%2Fcallback data-href="https://github.com/apps/hackmd-hub/installations/new" type="button" class="btn btn-primary ui-github-signin-button" style="margin-bottom: 30px"><i class="fa fa-github fa-fw"></i>&nbsp;Sign in to GitHub</a>
                <p><small style="color: #888888">HackMD links with GitHub through a GitHub App. You can choose which repo to install our App.</small></p>
            </div>
        </div>
    </div>
</div>

<!-- github sync modal -->
<div class="modal fade github-sync-modal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-lg">
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span>
                </button>

                <h4 class="modal-title" id="myModalLabel">
                    <span class="ui-push-title">Push the note to GitHub</span>
                    <span class="ui-push-only-title">Push to GitHub</span>
                    <span class="ui-pull-title">Pull a file from GitHub</span>
                </h4>
            </div>
            <div class="modal-body">
                <div class="alert alert-danger" style="display: none;">
                    <i class="fa fa-times ui-close-alert" aria-hidden="true" style="float: right;"></i>
                    <span class="ui-github-sync-alert-msg"></span>
                    &nbsp;<a href=https://github.com/login/oauth/authorize?client_id=Iv1.dce7f04830297ce5&amp;redirect_uri=https%3A%2F%2Fhackmd.io%2Fapi%2Fgithub%2Fsync%2Fcallback target="_blank" class="ui-github-sync-authorize-again" style="display: none;">Authorize again</a>
                </div>

                <div class="github-path-container flex items-center form-group">
                    <i class="fa fa-github"></i>&nbsp;
                    <span class="github-path" title="" data-toggle="tooltip" data-placement="bottom" data-offset="0,5" data-original-title=""></span>
                </div>

                <div class="choose-repo-file-section">
                    <h4 class="github-section-title">Choose which file to push to</h4>
                    <div style="display: flex; margin-bottom: 0px; align-items: center;">
                        <div style="flex: 1">Select repo
                            <i class="fa fa-question-circle fa-12 tooltip-align-left ui-second-menu-tooltip" style="color: #CDCDCD"
                            title="Select from repos that had HackMDâ€™s GitHub App installed"
                            data-toggle="tooltip" data-placement="bottom" data-offset="0,5"></i>
                        </div>
                        <div style="flex: 2; max-width: calc(100% * 2 / 3);">
                            <select id="github-repos" placeholder="Select a repo"></select>
                        </div>
                    </div>

                    <div style="margin: 5px 0px 30px 0px; text-align: right;">
                        <a href="#" class="ui-refresh-github-sync-repos" style="margin-right: 10px;">Refresh<i class="fa fa-rotate-left fa-12" style="margin-left: 3px;"></i></a>
                        <a href="https://github.com/apps/hackmd-hub/installations/new" target="_blank">Authorize more repos<i class="fa fa-angle-right fa-12" style="margin-left: 3px;"></i></a>
                    </div>

                    <div style="display: flex; margin-bottom: 30px; align-items: center;">
                        <div style="flex: 1">Select branch
                            <i class="fa fa-question-circle fa-12 tooltip-align-left ui-second-menu-tooltip" style="color: #CDCDCD"
                            title="You can select the target branch every time you push or pull"
                            data-toggle="tooltip" data-placement="bottom" data-offset="0,5"></i>
                        </div>
                        <div style="flex: 2; max-width: calc(100% * 2 / 3);">
                            <select id="github-branches"></select>
                        </div>
                    </div>

                    <div style="display: flex; margin-bottom: 30px; align-items: center;">
                        <div style="flex: 1">Select file</div>
                        <div style="flex: 2; max-width: calc(100% * 2 / 3);">
                            <select id="github-files"></select>
                        </div>
                    </div>
                </div>

                <div class="choose-branch-section">
                    <div style="display: flex; margin-bottom: 30px; align-items: center;">
                        <div style="flex: 1">Select branch
                            <i class="fa fa-question-circle fa-12 tooltip-align-left ui-second-menu-tooltip" style="color: #CDCDCD"
                            title="You can select the target branch every time you push or pull"
                            data-toggle="tooltip" data-placement="bottom" data-offset="0,5"></i>
                        </div>
                        <div style="flex: 2; max-width: calc(100% * 2 / 3);">
                            <select id="github-push-branches" placeholder="Select or create a branch"></select>
                        </div>
                    </div>
                </div>

                <div class="flex ui-push-mode" style="display: none">
                    <div style="flex: 1">Choose version(s) to push
                        <i class="fa fa-question-circle fa-12 tooltip-align-left ui-second-menu-tooltip" style="color: #CDCDCD"
                            title="HackMD will concatenate the version name and description as its commit message"
                            data-toggle="tooltip" data-placement="bottom" data-offset="0,5"></i>
                    </div>
                    <div style="flex: 2; max-width: calc(100% * 2 / 3);" id="version-select-tabs">
                        <ul class="nav nav-tabs" role="tablist" style="margin-bottom: 20px;">
                            <li role="presentation" class="ui-create-new-version active">
                                <a href="#create-new-version" aria-controls="create-new-version" role="tab" data-toggle="tab" style="height: 100%;">
                                    <i class="fa fa-check visibility-on-active" aria-hidden="true" style="margin-right:  3px;"></i>Save a new version and push</a>
                            </li>
                            <li role="presentation" class="ui-select-from-existing-version">
                                <a href="#select-from-existing-version" aria-controls="select-from-existing-version" role="tab" data-toggle="tab" style="height: 100%;">
                                    <i class="fa fa-check visibility-on-active" aria-hidden="true" style="margin-right:  3px;"></i>Choose from existing versions</a>
                            </li>
                        </ul>
                        <!-- Tab panes -->
                        <div class="tab-content">
                            <div role="tabpanel" class="tab-pane active" id="create-new-version">
                                <form data-toggle="validator" role="form" class="form create-version-form">
    <div class="form-group">
        <div class="ui-revision-timestamp">
            <i class="fa fa-clock-o fa-fw"></i>
            <span></span>
        </div>
    </div>

    <div class="form-group">
        <label for="">Name</label>
        <input type="text" class="form-control" placeholder="Please name the version" required maxlength="80">
    </div>

    <div class="form-group">
        <label for="">Description</label>
        <textarea class="form-control" style="width: 100%; height: 76px; resize: vertical;" placeholder="Please describe the version (optional)" maxlength="500"></textarea>
    </div>
    <div class="github-sync-button-container">
        <button type="button" class="btn btn-default" data-dismiss="modal" style="margin-right: 5px;">Cancel</button>
        <button type="submit" class="btn btn-primary ui-github-sync-button" disabled>Push</button>
    </div>
</form>

                            </div>
                            <div role="tabpanel" class="tab-pane" id="select-from-existing-version">
                                <div class="version-list flex flex-column">
                                </div>
                                <div class="github-sync-button-container">
                                    <button type="button" class="btn btn-default" data-dismiss="modal" style="margin-right: 5px;">Cancel</button>
                                    <button type="button" class="btn btn-primary ui-github-sync-button" disabled>Push</button>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="ui-pull-mode" style="text-align: right">
                    <button type="button" class="btn btn-default" data-dismiss="modal" style="margin-right: 5px;">Cancel</button>
                    <button type="button" class="btn btn-primary ui-github-sync-button" disabled>Pull</button>
                </div>
            </div>
        </div>
    </div>
</div>

<!-- github sync pull modal -->
<div class="modal fade" id="githubSyncPullModal" tabindex="-1" role="dialog" aria-labelledby="mySmallModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-lg" style="width: calc(100vw - 20px); max-width: 1200px; height: calc(100vh - 100px);">
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span>
                </button>
                </button>
                <h4 class="modal-title" id="mySmallModalLabel">Pull from GitHub</h4>
            </div>
            <div class="container-fluid modal-body pa-0 flex flex-column" style="max-height: calc(100vh - 100px); height: calc(100vh - 100px); overflow: hidden;">
                <div class="github-sync-pull-error flex flex-column items-center justify-center" style="display: none;">
                    <h3></h3>
                </div>

                <div class="github-path-container flex items-center">
                    <i class="fa fa-github"></i>&nbsp;
                    <span class="github-path" title="" data-toggle="tooltip" data-placement="bottom" data-offset="0,5" data-original-title=""></span>
                </div>

                <div class="github-pull-form">
                    <form class="form" id="github-sync-pull-form">
                        <div class="form-group flex justify-between items-center">
                            <label class="flex-shrink-0 mr-1">Pull from branch</label>

                            <select id="github-pull-branches" placeholder="Select a branch"></select>

                            <div class="pull-actions flex-shrink-0 ml-1">
                                <button type="button" data-dismiss="modal" class="btn btn-default" style="margin-right: 10px;">Cancel</button>

                                <button type="submit" class="btn btn-primary">
                                    Apply all changes
                                </button>
                            </div>
                        </div>

                        <div class="pull-view-indicator flex">
                            <div class="flex-one github">
                                <small>File from GitHub</small>
                            </div>
                            <div class="flex-one source">
                                <small>File from HackMD</small>
                            </div>
                        </div>
                    </form>

                </div>
                <div class="pull-editor-container flex flex-column">
                    <div id="github-sync-pull-editor" class="flex-one"></div>
                    <div class="ui-spinner unselectable hidden-print"></div>
                </div>
            </div>
        </div>
    </div>
</div>

<!-- github synced settings modal -->
<div class="modal fade github-synced-settings-modal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-lg">
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span>
                </button>
                <h4 class="modal-title" id="myModalLabel">GitHub Link Settings</h4>
            </div>
            <div class="modal-body" style="color:black;">
                <h4 style="border-bottom: 2px solid #cccccc; padding-bottom: 15px; margin: 5px 0px 30px 0px">File linked</h4>
                <div style="display: flex; margin-bottom: 30px; align-items: center;">
                    <div style="flex: 1">Linked by</div>
                    <div style="flex: 2; text-overflow: ellipsis; overflow: hidden; white-space: nowrap;" class="ui-github-synced-user">
                        <a target="_blank" class="ui-github-synced-user-photo"><img class="ui-avatar" width="30" height="30" style="border-radius: 100%; margin-right: 10px;"  src=""></a>
                        <a target="_blank" class="ui-github-synced-user-name"></a>
                    </div>
                </div>
                <div style="display: flex; margin-bottom: 30px; align-items: center;">
                    <div style="flex: 1">File path</div>
                    <div style="flex: 2; word-break: break-all" class="ui-github-synced-filepath" style="word-break: break-all;"></div>
                </div>
                <div style="display: flex; margin-bottom: 30px; align-items: center;">
                    <div style="flex: 1">Last synced branch
                        <i class="fa fa-question-circle fa-12 tooltip-align-left ui-second-menu-tooltip" style="color: #CDCDCD"
                        title="You can select the target branch every time you push or pull"
                        data-toggle="tooltip" data-placement="bottom" data-offset="0,5"></i>
                    </div>
                    <div style="flex: 2; word-break: break-all" class="ui-github-synced-recent-branch"></div>
                </div>
                <h4 style="border-bottom: 2px solid #cccccc; padding-bottom: 15px; margin: 5px 0px 30px 0px">Danger Zone</h4>
                <div style="display: flex; margin-bottom: 5px;">
                    <div style="flex: 1; margin-top: 7px;">Unlink</div>
                    <div style="flex: 2">
                        <button type="button" class="btn btn-danger btn-outline ui-github-cancel-sync-button">Unlink</button>
                        <div style="margin-top: 15px; font-size: 12px; color: #888;">You will no longer receive notification when GitHub file changes after unlink.</div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<!-- loading modal -->
<div class="modal fade loading-modal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true" data-backdrop="static" data-keyboard="false">
    <div class="modal-dialog modal-sm">
        <div class="modal-content">
            <div class="modal-body">
                <div>
                    <div class="ui-loading" style="height: 139px; width: 139px; position: relative; margin: 0 auto; top: 10px;"></div>
                    <p class="ui-loading-msg" style="text-align: center; margin-bottom: 35px; position: relative; top: 15px;">Syncing</p>
                </div>
            </div>
        </div>
    </div>
</div>

<!-- push failed modal -->
<div class="modal fade push-failed-modal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
  <div class="modal-dialog modal-lg" style="max-width: 400px; margin: auto;">
      <div class="modal-content">
          <div class="modal-header">
              <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span>
              </button>
              <h4 class="modal-title" id="myModalLabel">Push failed</h4>
          </div>
          <div class="modal-body" style="text-align: center;">
              <img src="https://hackmd.io/push-xx.svg" width="85px" height="96px" style="margin-top: 5px;">
              <div style="font-size: 16px; text-align: left; margin-top: 20px; word-break: break-all;"></div>
          </div>
          <div class="modal-footer" style="border: none; padding-top: 5px;">
              <button type="button" class="btn btn-default" data-dismiss="modal">Cancel</button>
              <button type="button" class="btn btn-primary" data-dismiss="modal">Try again</button>
          </div>
      </div>
  </div>
</div>
<!-- push success modal -->
<div class="modal fade push-success-modal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
  <div class="modal-dialog modal-lg" style="max-width: 400px; margin: auto;">
      <div class="modal-content">
          <div class="modal-body" style="text-align: center; margin: 35px 0px;">
                <img src="https://hackmd.io/push-done.svg" width="85px" height="94.7px">
                <div style="font-size: 18px; margin-top: 20px;">
                    Push successfully
                </div>
          </div>
      </div>
  </div>
</div>


    
    
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-60728495-1"></script>
<script nonce="23a5ded9-ebef-40ba-a57a-9088fedb1593">
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());
    let userid = (document.cookie.match('(^|; )userid=([^;]*)')||0)[2];
    gtag('config', 'UA-60728495-1', {'user_id': userid});
</script>
<script src="https://browser.sentry-cdn.com/5.15.5/bundle.min.js" crossorigin="anonymous"></script>
<script nonce="23a5ded9-ebef-40ba-a57a-9088fedb1593">Sentry.init({ dsn: 'https://73410f1915d84abc8b2dd1f1aabd1c82@sentry.hackmd.dev/4', environment: 'production', integrations: function (intrus) { return intrus.filter(function (itr) { return itr.name !== 'TryCatch' }) } });</script>



<!-- Google Tag Manager (noscript) -->
<noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-KLW9Z3"
height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
<!-- End Google Tag Manager (noscript) -->


<script src="https://hackmd.io/api/i18n.js"></script>

 <script src="https://assets.hackmd.io/build/font-vendor.3c28db3001b8bd6f1d3f.js" defer="defer"></script><script src="https://assets.hackmd.io/build/common-vendor.d485f77e88ea7ed44236.js" defer="defer"></script><script src="https://assets.hackmd.io/build/index-vendor.9f572be54ba15499dc49.js" defer="defer"></script><script src="https://assets.hackmd.io/build/index-common.1429405d3d9771736815.js" defer="defer"></script><script src="https://assets.hackmd.io/build/index.88a0138228fd75cae1f0.js" defer="defer"></script>




</body>

</html>
